<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:fragment="head-content">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Insurance Manager</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            50: '#fff7ed',  // Orange tints
                            100: '#ffedd5',
                            200: '#fed7aa',
                            300: '#fdba74',
                            400: '#fb923c',
                            500: '#f97316',
                            600: '#ea580c',
                            700: '#c2410c',
                            800: '#9a3412',
                            900: '#7c2d12',
                        },
                        dark: {
                            900: '#0a0a0a',
                            800: '#171717',
                            700: '#262626',
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <!-- Custom Style (Theme Override) -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Scripts (Global) - Moved to head for consistent loading -->
    <script src="/js/cursor.js" defer></script>
    <script src="/js/navbar.js" defer></script>

    <style>
        /* Mobile Menu Transition */
        #mobile-menu {
            transition: max-height 0.3s ease-in-out, opacity 0.3s ease-in-out;
            max-height: 0;
            opacity: 0;
            overflow: hidden;
        }

        #mobile-menu.open {
            max-height: 400px;
            opacity: 1;
        }
    </style>
</head>

<body class="bg-[#0a0a0a] text-[#ff6b00]">

    <!-- Navbar Fragment -->
    <nav th:fragment="navbar"
        class="navbar fixed w-full z-50 top-0 transition-all duration-300 bg-[#0a0a0a]/90 backdrop-blur-md border-b border-orange-500/10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-20 items-center">

                <!-- Logo -->
                <div class="flex-shrink-0 flex items-center">
                    <a href="/" id="logo-link"
                        class="text-2xl font-bold tracking-wider text-[#ff6b00] hover:text-[#ff9e5e] transition-colors">
                        INSURE<span id="brand-suffix" class="text-white">DOCS</span>
                    </a>
                </div>

                <!-- Desktop Menu -->
                <div class="hidden md:flex space-x-8 items-center h-full">
                    <a href="/dashboard"
                        class="nav-item group flex flex-col items-center justify-center h-full text-sm font-medium text-gray-400 hover:text-[#ff6b00] transition-colors relative">
                        <span class="text-[0.6rem] opacity-50 absolute -top-1 group-hover:text-[#ff6b00]">01</span>
                        HOME
                    </a>
                    <a href="#"
                        class="nav-item group flex flex-col items-center justify-center h-full text-sm font-medium text-gray-400 hover:text-[#ff6b00] transition-colors relative">
                        <span class="text-[0.6rem] opacity-50 absolute -top-1 group-hover:text-[#ff6b00]">02</span>
                        POLICIES
                    </a>
                    <a href="/contact"
                        class="nav-item group flex flex-col items-center justify-center h-full text-sm font-medium text-gray-400 hover:text-[#ff6b00] transition-colors relative">
                        <span class="text-[0.6rem] opacity-50 absolute -top-1 group-hover:text-[#ff6b00]">03</span>
                        CONTACT US
                    </a>

                    <!-- Auth Links -->
                    <div th:if="${#authorization.expression('isAuthenticated()')}" class="relative ml-4 group">
                        <button id="user-menu-button"
                            class="flex items-center gap-2 text-sm text-gray-400 hover:text-[#ff6b00] transition-colors focus:outline-none">
                            <span class="border border-orange-500/20 px-3 py-1 rounded-full"
                                th:text="${#authentication.principal instanceof T(com.insurance.manager.security.CustomUserDetails) ? #authentication.principal.fullName : #authentication.name}">
                                User
                            </span>
                            <i
                                class="fas fa-chevron-down text-xs transition-transform duration-200 group-hover:rotate-180"></i>
                        </button>

                        <!-- Dropdown -->
                        <div
                            class="absolute right-0 mt-2 w-48 bg-[#0a0a0a] border border-orange-500/10 rounded-xl shadow-2xl py-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform origin-top-right z-50 backdrop-blur-xl">
                            <div class="px-4 py-2 border-b border-white/5 mb-1">
                                <p class="text-xs text-gray-500 uppercase tracking-widest">Signed in as</p>
                                <p class="text-sm font-medium text-white truncate" th:text="${#authentication.name}">
                                    email</p>
                            </div>
                            <form th:action="@{/logout}" method="post">
                                <button type="submit"
                                    class="w-full text-left px-4 py-2 text-sm text-gray-400 hover:text-red-500 hover:bg-white/5 transition-colors flex items-center gap-2">
                                    <i class="fas fa-sign-out-alt"></i> Logout
                                </button>
                            </form>
                        </div>
                    </div>
                    <div th:unless="${#authorization.expression('isAuthenticated()')}" class="flex items-center gap-6">
                        <a href="/login"
                            class="px-5 py-2 border border-[#ff6b00] text-[#ff6b00] text-sm font-medium rounded hover:bg-[#ff6b00] hover:text-black transition-all">
                            LOGIN
                        </a>
                        <a href="/register"
                            class="px-5 py-2 border border-white/20 text-white text-sm font-medium rounded hover:bg-white hover:text-black transition-all">
                            REGISTER
                        </a>
                    </div>
                </div>

                <!-- Mobile Menu Button -->
                <div class="-mr-2 flex items-center md:hidden">
                    <button type="button" id="mobile-menu-btn"
                        class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-[#ff6b00]"
                        aria-controls="mobile-menu" aria-expanded="false">
                        <span class="sr-only">Open main menu</span>
                        <!-- Icon when menu is closed -->
                        <svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Menu -->
        <div class="md:hidden bg-[#0a0a0a] border-b border-orange-500/10" id="mobile-menu">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="/dashboard"
                    class="block px-3 py-2 rounded-md text-base font-medium text-white bg-gray-900 border-l-4 border-[#ff6b00]">Dashboard</a>
                <a href="#"
                    class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700">Policies</a>

                <!-- Auth Links -->
                <div th:if="${#authorization.expression('isAuthenticated()')}"
                    class="mt-4 pt-4 border-t border-gray-700">
                    <div class="flex items-center px-5">
                        <div class="ml-3">
                            <div class="text-base font-medium leading-none text-white"
                                th:text="${#authentication.name}">Tom Cook</div>
                        </div>
                    </div>
                    <div class="mt-3 px-2 space-y-1">
                        <form th:action="@{/logout}" method="post">
                            <button type="submit"
                                class="block w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-400 hover:text-white hover:bg-gray-700">Sign
                                out</button>
                        </form>
                    </div>
                </div>
                <div th:unless="${#authorization.expression('isAuthenticated()')}"
                    class="mt-4 pt-4 border-t border-gray-700 px-2 space-y-2">
                    <a href="/login"
                        class="block w-full text-center px-4 py-2 border border-transparent rounded-md shadow-sm text-base font-medium text-black bg-[#ff6b00] hover:bg-[#ff8533]">Login</a>
                    <a href="/register"
                        class="block w-full text-center px-4 py-2 border border-gray-600 rounded-md shadow-sm text-base font-medium text-white hover:bg-gray-800">Register</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Footer Fragment -->
    <footer th:fragment="footer" class="bg-[#0a0a0a] border-t border-white/5 mt-auto py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 md:flex md:items-center md:justify-between">
            <div class="flex justify-center md:order-2 space-x-6">
                <a href="#" class="text-gray-400 hover:text-[#ff6b00] transition-colors">
                    <span class="sr-only">GitHub</span>
                    <i class="fab fa-github text-xl"></i>
                </a>
            </div>
            <div class="mt-8 md:mt-0 md:order-1">
                <p class="text-center text-sm text-gray-500">
                    &copy; 2026 InsureDocs. All rights reserved.
                </p>
            </div>
        </div>
    </footer>

    <script>
        // Mobile menu toggle
        const btn = document.getElementById('mobile-menu-btn');
        const menu = document.getElementById('mobile-menu');

        if (btn && menu) {
            btn.addEventListener('click', () => {
                menu.classList.toggle('open');
            });
        }
    </script>

</body>

</html>